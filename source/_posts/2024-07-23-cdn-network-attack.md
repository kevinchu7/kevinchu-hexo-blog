---
title: 记一次网站CDN流量被恶意盗刷事件
index_img: https://static.kevinchu.top/blog/assets/img/cover_010.jpeg
archive: false
date: 2024-07-24 00:54:47
updated: 2024-07-24 00:54:47
tags:
    - CDN
    - 网络安全
categories:
    - 踩坑指南
---

>7月份的天气令人浮躁，最近整个人的状态也是一点即燃的😡。这会儿呆在空调房里才可以提醒自己：冷静，克制，专注。


## 1.问题始末

7月23日23时许，博主刚从小憩中苏醒，就收到了腾讯云发来的CDN流量包不足的告警邮件，意识到站点可能遭到攻击了。

赶忙检查一看，果不其然，某个CDN加速的域名从19时53分开始，访问流量异常暴增，妥妥的是被人恶意盗刷了😅。于是乎，博主立即对该域名进行了临时限制，稍后定位漏洞并补充防护措施。终于在23时10分左右监控显示访问流量恢复正常。

![](https://static.kevinchu.top/blog/public/20240724005450.png)


说来也可笑，这~~小初生~~(小可爱)攻击的手段也是极其拙劣，对着一张350k的图片猛刷17.72万次，

![](https://static.kevinchu.top/blog/public/20240724014208.png)


甚至连ip都不带变的，前前后后就用一个ip是吧，


![](https://static.kevinchu.top/blog/public/20240724015218.png)


![](https://static.kevinchu.top/blog/public/20240724020029.png)



不过，这样拙劣的方法也刷了我60多G的CDN流量，得亏是流量包，如果扣的是钱包那就损失大了，说明站点对此类攻击的防护确实存在问题。经过检查，部分CDN域名的安全访问配置确实是忘了开启，这也提醒博主不能再疏忽任何面向公网内容的安全访问配置，需要做好防护措施。



话说回来，一直以来，博主的各个小站纯粹因个人爱好而建，尚未有任何盈利目的，所以也尽可能保持着低成本运营。谁知到这么不起眼的小站也会有小可爱来搞破坏，实属小站荣幸，在此感谢你~~八辈祖宗~~😘。




## 2.解决方法

对于此类恶意盗刷流量的攻击，市面上比较成熟的服务商都有针对性的防御功能，一般只需要参考着文档开启和进行配置即可。

以腾讯云为例，可以参考内容分发网络CDN服务购买指南里的[攻击风险预防方案](https://cloud.tencent.com/document/product/228/51813)，进行访问控制和流量管理，具体可用的功能参考如图。

![](https://static.kevinchu.top/blog/public/20240724033336.png)

防御措施可概括为限制访问（设置防盗链、黑白名单等）和监控告警（流量封顶、邮件提醒等），建议有针对性地开启，以避免产生不必要的流量带宽消耗。



## 3.总结与反思

- 任何放上公网的内容都需要有被攻击的风险意识，无论服务器还是代理托管服务，都需要定期检查漏洞和启用安全措施。
- 监控告警、邮件提醒功能有的话一定要开启，合理设置资源用尽后的关闭和锁定机制，以在被攻击后能及时止损。
- 等有钱，上高防！